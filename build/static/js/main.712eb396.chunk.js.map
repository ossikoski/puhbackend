{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Notification.js","services/personService.js","App.js","index.js"],"names":["Filter","handleFilterChange","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","type","Person","person","deletePerson","console","log","id","name","number","onClick","Notification","message","error","className","baseUrl","request","axios","get","body","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","filter","setFilter","notificationMessage","setNotificationMessage","personsToShow","toLowerCase","includes","useEffect","personService","initialPersons","event","target","preventDefault","personObject","personNamesArray","map","window","confirm","returnedPerson","setTimeout","catch","concat","i","key","find","p","deletePersonOf","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.712eb396.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({handleFilterChange}) => {\r\n    return(\r\n        <div>\r\n            filter shown with:\r\n            <input\r\n                onChange = {handleFilterChange}\r\n            />\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n    return(\r\n        <form onSubmit={addPerson}>\r\n        <div>\r\n          name: \r\n          <input \r\n            value = {newName}\r\n            onChange = {handleNameChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input\r\n            value = {newNumber}\r\n            onChange = {handleNumberChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({ person, deletePerson }) => {\r\n    return(\r\n        <div>\r\n            {console.log(\"id\", person.id)}\r\n            {person.name} {person.number}\r\n            <button onClick={deletePerson}>\r\n                delete\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  const error = message[0]\r\n  const messagetext = message[1]\r\n    if (messagetext === null) {\r\n      return null\r\n    }\r\n    else if (error){\r\n      return (\r\n        <div className=\"error\">\r\n        {message}\r\n      </div>\r\n      )\r\n    }\r\n    return (\r\n      <div className=\"notification\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  console.log(\"request.body\", request.body)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleting = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deleting}","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter.js'\nimport PersonForm from './components/PersonForm.js'\nimport Person from './components/Person.js'\nimport Notification from './components/Notification.js'\n\nimport personService from './services/personService.js'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ notificationMessage, setNotificationMessage ] = useState([false, null])\n  \n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter))\n  console.log(\"personstoshow\", personsToShow)\n\n  useEffect(() => {\n    console.log('effect')\n    personService   \n      .getAll()\n        .then(initialPersons => {\n          console.log(\"initialpersons\", initialPersons)\n          setPersons(initialPersons)\n        })\n  }, [])\n  console.log(\"persons after render\", persons)\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const personNamesArray = persons.map(person => person.name)\n    console.log(\"Does include\", personNamesArray.includes(newName))\n    let replace_result = true\n\n    if(personNamesArray.includes(newName)){\n      replace_result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if(replace_result){\n        let id = 0\n        for(let person of persons){\n          if(person.name === newName){\n            id = person.id\n          }\n        }\n        personService\n        .update(id, personObject)\n          .then(returnedPerson => {\n            console.log(\"UPDATE\", returnedPerson)\n            setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n            setNotificationMessage(\n              [false, `${newName} number changed to ${newNumber}`]\n            )\n            setTimeout(() => {\n              setNotificationMessage([false, null])\n            }, 5000)\n          })\n        .catch(error => {\n          setNotificationMessage([true, `${newName} has already been deleted from the server`])\n          setPersons(persons.filter(person => person.id !== id))\n          setTimeout(() => {\n            setNotificationMessage([false, null])\n          }, 5000)\n        })\n        \n      }\n    }\n    else{\n      personService\n        .create(personObject)\n          .then(returnedPerson => {\n            console.log(\"returnedPerson:\", returnedPerson)\n            setPersons(persons.concat(returnedPerson))\n            setNewName('')\n            setNewNumber('')\n        })\n      setNotificationMessage([\n        false, \n        `Added ${newName}`\n      ])\n      setTimeout(() => {\n        setNotificationMessage([false, null])\n      }, 5000)\n    }\n  }\n\n  const deletePersonOf = id => {\n    console.log(\"ID\", id)\n    const person = persons.find(p => p.id === id) \n\n    const delete_result = window.confirm(`Delete ${person.name} ?`)\n\n    if(delete_result){\n      console.log(\"DELETING\")\n      personService\n      .deleting(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id))\n          console.log(\"DELETED\")\n          setNotificationMessage([\n            false,\n            `Deleted ${person.name}`\n          ])\n          setTimeout(() => {\n            setNotificationMessage([false, null])\n          }, 5000)\n        })\n      .catch(error => {\n        setNotificationMessage([true, `${person.name} has already been deleted from the server`])\n        setPersons(persons.filter(person => person.id !== id))\n        setTimeout(() => {\n          setNotificationMessage([false, null])\n        }, 5000)\n      })\n    }\n    \n    \n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value.toLowerCase())\n    setFilter(event.target.value.toLowerCase())\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={notificationMessage}/>\n\n      <Filter handleFilterChange={handleFilterChange}/>\n\n      <h3>add a new</h3>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n\n      <h3>Numbers</h3>\n\n      {personsToShow.map((person, i) =>\n        <Person key = {i}\n        person = {person}\n        deletePerson={()=>deletePersonOf(person.id)}\n        />\n      )}\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}